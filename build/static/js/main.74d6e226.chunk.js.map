{"version":3,"sources":["events.js","factories.js","components/LoginForm.js","components/chats/SideBarOption.js","components/chats/Sidebar.js","components/chats/ChatHeading.js","components/Messages/Messages.js","components/Messages/MessageInput.js","components/chats/ChatContainer.js","components/Layout.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","GLOBAL_CHAT","USER_CONNECTED","MESSAGE_RECIEVED","MESSAGE_SENT","USER_DISCONNECTED","TYPING","VERIFY_USER","LOGOUT","PRIVATE_MESSAGE","NEW_CHAT_USER","uuidv4","require","createChatNameFromUsers","users","excludeUser","arguments","length","undefined","filter","u","join","getTime","date","concat","getHours","getMinutes","slice","createMessage","_ref2","_ref2$message","message","_ref2$sender","sender","id","time","Date","now","createChat","_ref3","_ref3$messages","messages","_ref3$users","name","_ref3$isGlobal","isGlobal","typingUsers","createUser","_ref","_ref$name","_ref$socketId","socketId","LoginForm","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","setUser","isUser","user","setError","handleSubmit","e","preventDefault","socket","emit","state","handle","handleChange","setState","target","value","error","_this2","_this$state","react_default","a","createElement","className","onSubmit","htmlFor","autoFocus","ref","input","textInput","type","onChange","Component","SideBarOption","_this$props","lastMessage","active","onClick","toUpperCase","SideBar","onSendPrivateMessage","reciever","addChatForUser","username","setActiveSidebar","CHATS","newSideBar","activeSidebar","toggleNavbar","bind","assertThisInitialized","collapsed","console","log","setActiveChat","logout","chats","activeChat","reactstrap_es","color","light","isOpen","navbar","vertical","fa","placeholder","USERS","refs","map","chat","chats_SideBarOption","key","get","last","differenceBy","title","md","Messages","scrollDown","prevProps","prevState","container","scrollTop","scrollHeight","mes","MessageInput","sendMessage","sendTyping","lastUpdateTime","isTyping","startCheckingTyping","typingInterval","setInterval","stopCheckingTyping","clearInterval","onKeyUp","keyCode","v","disabled","ChatContainer","sendOpenPrivateMessage","addUserToChat","chatId","newUser","newChats","assign","toConsumableArray","removeUsersFromChat","removedUsers","newUsers","difference","objectSpread","resetChat","addChat","messageEvent","typingEvent","on","updateTypingInChat","addMessageToChat","includes","push","self","window","addEventListener","event","width","Math","max","document","documentElement","clientWidth","innerWidth","initSocket","off","values","_this3","msg","_this4","clientHeight","innerHeight","Sidebar_SideBar","components_Messages_Messages","Messages_MessageInput","socketUrl","Layout","reconnect","io","chats_ChatContainer","components_LoginForm","App","components_Layout","Boolean","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.74d6e226.chunk.js","sourcesContent":["module.exports = {\n  GLOBAL_CHAT: \"GLOBAL_CHAT\",\n  USER_CONNECTED: \"USER_CONNECTED\",\n  MESSAGE_RECIEVED: \"MESSAGE_RECIEVED\",\n  MESSAGE_SENT: \"MESSAGE_SENT\",\n  USER_DISCONNECTED: \"USER_DISCONNECTED\",\n  TYPING: \"TYPING\",\n  VERIFY_USER: \"VERIFY_USER\",\n  LOGOUT: \"LOGOUT\",\n  PRIVATE_MESSAGE: \"PRIVATE_MESSAGE\",\n  NEW_CHAT_USER: \"NEW_CHAT_USER\"\n}\n","const uuidv4 = require('uuid/v4');\n\n/**\n * ? d\n * ! d\n * // f\n * todo a\n * * f\n */\n\n/**\n *  create a user\n */\n\nconst createUser = ({name = '', socketId = null} = {}) => (\n  {\n    id: uuidv4(),\n    name,\n    socketId\n  }\n)\n\n/**\n *  create a messages object\n */\n\n const createMessage = ({message = '', sender = ''} = {}) => (\n   {\n     id: uuidv4(),\n     time: getTime(new Date(Date.now())),\n     message,\n     sender\n   }\n )\n\n/**\n* create a Chat object\n*/\n\n const createChat = ({messages = [], name = \"Lapusna\", users = [], isGlobal = false} = {}) => (\n   {\n     id: uuidv4(),\n     name: isGlobal ? 'Lapusna' : createChatNameFromUsers(users),\n     messages,\n     users,\n     typingUsers: [],\n     isGlobal\n   }\n )\n\n function createChatNameFromUsers(users, excludeUser = '') {\n   return users.filter(u => u !== excludeUser).join(' & ') || 'Lapusna'\n }\n\n const getTime = (date) => {\n   return `${date.getHours()}:${(\"0\"+date.getMinutes()).slice(-2)}`\n }\n\n module.exports = {\n   createMessage,\n   createChat,\n   createUser,\n   createChatNameFromUsers\n }\n","import React, { Component } from 'react';\nimport {VERIFY_USER} from '../events';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      handle: '',\n      error: ''\n    }\n  }\n\n  setUser = ({isUser, user}) => {\n    if(isUser) {\n      this.setError(\"Username taken\")\n    } else {\n      this.setError(null)\n      this.props.setUser(user)\n    }\n  }\n\n  /**\n   * Emit to the server and send the input handle so we\n   * can verify the user. The setUser cb will be called\n   * by the server with the response -> if a user already exists -\n   * an error is thrown, else - call local setUser that subsequently\n   * calls the setUser fn in the ChatContainer comp via props\n   */\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.socket.emit(VERIFY_USER, this.state.handle, this.setUser)\n  }\n\n  handleChange = (e) => {\n    this.setState({handle: e.target.value})\n  }\n\n  setError = (error) => {\n    this.setState({error})\n  }\n\n  render() {\n    const {handle, error} = this.state;\n    return (\n      <div className=\"login\">\n        <form onSubmit={this.handleSubmit} className=\"login-form\">\n          <label htmlFor=\"handle\">\n            <h2>Enter your username:</h2>\n          </label>\n          <input\n            autoFocus\n            ref={(input) => { this.textInput = input}}\n            type=\"text\"\n            id=\"nickname\"\n            value={handle}\n            onChange={this.handleChange}\n          />\n          <div className=\"error\">\n            {error ? error : null}\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n","import React, { Component } from 'react';\n\nclass SideBarOption extends Component {\n  render() {\n    const { name, lastMessage, active, onClick } = this.props;\n    return (\n      <div className={`user ${active ? 'active' : ''}`} onClick={onClick}>\n        <div className=\"user-photo\">{name[0].toUpperCase()}</div>\n        <div className=\"user-info\">\n          <div className=\"name\">{name}</div>\n          {lastMessage && <div className=\"last-message\">{lastMessage}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SideBarOption;\n","import React, { Component } from 'react';\nimport { get, last, differenceBy } from 'lodash';\nimport { Nav, NavItem, NavLink, Navbar, NavbarToggler, NavbarBrand, Collapse } from 'reactstrap';\nimport { FAMenu, FaSearch as FASearch } from 'react-icons/fa';\nimport { MdEject } from 'react-icons/md';\nimport SideBarOption from './SideBarOption';\nimport { createChatNameFromUsers } from '../../factories';\n\nexport default class SideBar extends Component {\n  static type = {\n    CHATS: 'chats',\n    USERS: 'users'\n  };\n  constructor(props) {\n    super(props);\n    this.toggleNavbar = this.toggleNavbar.bind(this);\n\n    this.state = {\n      collapsed: true,\n      reciever: '',\n      activeSidebar: SideBar.type.CHATS\n    };\n  }\n\n  toggleNavbar() {\n    this.setState({\n      collapsed: !this.state.collapsed\n    });\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.props.onSendPrivateMessage(this.state.reciever);\n    this.setState({ reciever: '' });\n  };\n\n  addChatForUser = username => {\n    this.props.onSendPrivateMessage(username);\n    this.setActiveSidebar(SideBar.type.CHATS);\n  };\n\n  setActiveSidebar = newSideBar => {\n    this.setState({ activeSidebar: newSideBar });\n  };\n\n  render() {\n    console.log(this.props)\n    const {\n      user,\n      users,\n      setActiveChat,\n      logout,\n      chats,\n      activeChat\n    } = this.props;\n    const { reciever, activeSidebar } = this.state;\n    return (\n      <div id=\"side-bar\">\n        <Navbar color=\"faded\" light>\n          <NavbarBrand className=\"mr-auto\">iChat</NavbarBrand>\n          <NavbarToggler onClick={this.toggleNavbar} className=\"mr-2\" />\n          {/* <h4>{this.props.name}</h4> */}\n          <Collapse isOpen={!this.state.collapsed} navbar>\n          <Nav navbar vertical>\n            {/* <div className=\"heading\">\n          <div className=\"app-name\">\n            <h1>iChat</h1>\n          </div>\n          <div className=\"menu\">\n            <FAMenu />\n          </div>\n        </div>*/}\n            <NavItem>\n              <form onSubmit={this.handleSubmit} className=\"search\">\n                <i className=\"search-icon\">\n                  <FASearch />\n                </i>\n                <input\n                  onChange={e => this.setState({ reciever: e.target.value })}\n                  value={reciever}\n                  placeholder=\"Search\"\n                  type=\"text\"\n                />\n              </form>\n            </NavItem>\n            <NavItem>\n              <div className=\"side-bar-select\">\n                <div\n                  onClick={() => this.setActiveSidebar(SideBar.type.CHATS)}\n                  className={`side-bar-select__option ${\n                    activeSidebar === SideBar.type.CHATS ? 'active' : ''\n                  }`}\n                >\n                  <span>Chats</span>\n                </div>\n                <div\n                  onClick={() => this.setActiveSidebar(SideBar.type.USERS)}\n                  className={`side-bar-select__option ${\n                    activeSidebar === SideBar.type.USERS ? 'active' : ''\n                  }`}\n                >\n                  <span>Users</span>\n                </div>\n              </div>\n            </NavItem>\n            <NavItem className=\"userList\">\n              <div\n                className=\"users\"\n                ref=\"users\"\n                onClick={e => {\n                  e.target === this.refs.user && setActiveChat(null);\n                }}\n              >\n                {activeSidebar === SideBar.type.CHATS\n                  ? chats.map(chat => {\n                      return (\n                        <SideBarOption\n                          key={chat.id}\n                          lastMessage={get(last(chat.messages), 'message', '')}\n                          name={\n                            chat.isGlobal\n                              ? chat.name\n                              : createChatNameFromUsers(chat.users, user.name)\n                          }\n                          active={activeChat.id === chat.id}\n                          onClick={() => {\n                            this.props.setActiveChat(chat);\n                          }}\n                        />\n                      );\n                    })\n                  : differenceBy(users, [user], 'name').map(user => {\n                      return (\n                        <SideBarOption\n                          key={user.id}\n                          name={user.name}\n                          onClick={() => {\n                            this.addChatForUser(user.name);\n                          }}\n                        />\n                      );\n                    })}\n              </div>\n            </NavItem>\n            <NavItem className=\"small\">\n              <div className=\"current-user\">\n                <span>{user.name}</span>\n                <div\n                  onClick={() => {\n                    logout();\n                  }}\n                  title=\"Logout\"\n                  className=\"logout\"\n                >\n                  <MdEject />\n                </div>\n              </div>\n            </NavItem>\n          </Nav>\n          </Collapse>\n        </Navbar>\n        <div className=\"current-user big\">\n          <span>{user.name}</span>\n          <div\n            onClick={() => {\n              logout();\n            }}\n            title=\"Logout\"\n            className=\"logout\"\n          >\n            <MdEject />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nconst ChatHeading = ({name, numberOfUsers}) => {\n  return (\n    <div className=\"chat-header\">\n      <div className=\"user-info\">\n        <div className=\"user-name\">{name}</div>\n        <div className=\"status\">\n          <div className=\"indicator\"></div>\n          <span>{numberOfUsers ? numberOfUsers : null}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatHeading;\n","import React, { Component } from 'react';\n\nclass Messages extends Component {\n  constructor(props) {\n    super(props);\n    this.scrollDown = this.scrollDown.bind(this);\n  }\n  componentDidMount() {\n    this.scrollDown();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    this.scrollDown();\n  }\n\n  scrollDown() {\n    const { container } = this.refs;\n    container.scrollTop = container.scrollHeight;\n  }\n\n  render() {\n    const { messages, user, typingUsers } = this.props;\n    return (\n      <div ref=\"container\" className=\"thread-container\">\n        <div className=\"thread\">\n          {messages.map(mes => {\n            return (\n              <div\n                key={mes.id}\n                className={`message-container ${mes.sender === user.name &&\n                  'right'}`}\n              >\n                <div className=\"time\"><span>{mes.sender.slice(0,1).toUpperCase()}</span></div>\n                <div className=\"data\">\n                  <div className=\"message\">{mes.message}</div>\n                  <div className=\"name\">{mes.time}</div>\n                </div>\n              </div>\n            );\n          })}\n          <div className=\"typing-user\">\n            {typingUsers.map(name => {\n              return (\n                  <span>{`${name} is typing...`}</span>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Messages;\n","import React, { Component } from 'react';\n\nclass MessageInput extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      message: '',\n      isTyping: false\n    };\n  }\n  componentWillUnmount() {\n    this.stopCheckingTyping();\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.sendMessage();\n    this.setState({ message: '' });\n  };\n\n  sendMessage = () => {\n    this.props.sendMessage(this.state.message);\n  };\n\n  sendTyping = () => {\n    this.lastUpdateTime = Date.now();\n    if (!this.state.isTyping) {\n      this.setState({ isTyping: true });\n      this.props.sendTyping(true);\n      this.startCheckingTyping();\n    }\n  };\n\n  startCheckingTyping = () => {\n    this.typingInterval = setInterval(() => {\n      if (Date.now() - this.lastUpdateTime > 300) {\n        this.setState({ isTyping: false });\n        this.stopCheckingTyping();\n      }\n    }, 300);\n  };\n\n  stopCheckingTyping = () => {\n    if (this.typingInterval) {\n      clearInterval(this.typingInterval);\n      this.props.sendTyping(false);\n    }\n  };\n\n  render() {\n    const { message } = this.state;\n    return (\n      <div className=\"message-input\">\n        <form onSubmit={this.handleSubmit} className=\"message-form\">\n          <input\n            type=\"text\"\n            id=\"message\"\n            ref=\"messageInput\"\n            className=\"form-control\"\n            value={message}\n            placeholder=\"Message\"\n            onKeyUp={e => e.keyCode !== 13 && this.sendTyping()}\n            onChange={({ target: { value: v } }) => {\n              this.setState({ message: v });\n            }}\n          />\n          <button disabled={message.length < 1} type=\"submit\" className=\"send\">\n            Send\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default MessageInput;\n","import React, { Component } from 'react';\nimport { Container, Row, Col } from 'reactstrap';\nimport { values, difference, differenceBy } from 'lodash';\nimport SideBar from './Sidebar';\nimport {\n  GLOBAL_CHAT,\n  MESSAGE_RECIEVED,\n  MESSAGE_SENT,\n  TYPING,\n  PRIVATE_MESSAGE,\n  USER_CONNECTED,\n  USER_DISCONNECTED,\n  NEW_CHAT_USER\n} from '../../events';\nimport ChatHeading from './ChatHeading';\nimport Messages from '../Messages/Messages';\nimport MessageInput from '../Messages/MessageInput';\n\nclass ChatContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chats: [],\n      users: [],\n      activeChat: null\n    };\n  }\n  componentDidMount() {\n    var self = this;\n    window.addEventListener('resize', function(event) {\n      self.setState({\n        width: Math.max(\n          document.documentElement.clientWidth,\n          window.innerWidth || 0\n        )\n      });\n    });\n    /**\n     * Initiates a new chat. The response from the server\n     * will be a chat object that will be passed to resetChat fn\n     * This way we can set the global chat as the activeChat autmatically\n     * without the need to select it manualy\n     */\n    this.props.socket.emit(GLOBAL_CHAT, this.resetChat);\n    this.initSocket(this.props.socket);\n  }\n\n  componentWillUnmount() {\n    this.props.socket.off(PRIVATE_MESSAGE);\n    this.props.socket.off(USER_CONNECTED);\n    this.props.socket.off(USER_DISCONNECTED);\n    this.props.socket.off(NEW_CHAT_USER);\n  }\n\n  initSocket(socket) {\n    socket.on(PRIVATE_MESSAGE, this.addChat);\n    socket.on('connect', () => {\n      socket.emit(GLOBAL_CHAT, this.resetChat);\n    });\n    socket.on(USER_CONNECTED, users => {\n      this.setState({ users: values(users) });\n    });\n    socket.on(USER_DISCONNECTED, users => {\n      const removedUsers = differenceBy(this.state.users, values(users));\n      this.removeUsersFromChat(removedUsers);\n      this.setState({ users: values(users) });\n    });\n    socket.on(NEW_CHAT_USER, this.addUserToChat);\n  }\n\n  sendOpenPrivateMessage = reciever => {\n    this.props.socket.emit(PRIVATE_MESSAGE, {\n      reciever,\n      sender: this.props.user.name,\n      activeChat: this.state.activeChat\n    });\n  };\n  // we will get chatid and newUser from the backend\n  addUserToChat = ({ chatId, newUser }) => {\n    const newChats = this.state.chats.map(chat => {\n      if (chat.id === chatId) {\n        return Object.assign({}, chat, { users: [...chat.users, newUser] });\n      }\n      return chat;\n    });\n    this.setState({ chats: newChats });\n  };\n\n  removeUsersFromChat = removedUsers => {\n    const newChats = this.state.chats.map(chat => {\n      let newUsers = difference(chat.users, removedUsers.map(u => u.name));\n      // spread operator works just like Object.assign in the prev method\n      return { ...chat, users: newUsers };\n    });\n    this.setState({ chats: newChats });\n  };\n\n  // reset the chat back to the one passed in\n  resetChat = chat => this.addChat(chat, true);\n\n  /**\n   * The logic for adding the chats to our state. When a `true`\n   * reset parameter is passed, it means we want to reset our chat just\n   * to the global one, otherwise push the passed-in chat to our chats array.\n   * Also, set the new chat to the activeChat state prop\n   */\n  addChat = (chat, reset = false) => {\n    /**\n     * if reset=true -> we emited the global_chat action and the state\n     *  will be reset to just the global chat\n     */\n    const newChats = reset ? [chat] : [...this.state.chats, chat];\n    /**\n     * activeChat will become whaterver chat wass passed in to the addChat fn,\n     * by default it will be the global chat\n     */\n    this.setState({ chats: newChats, activeChat: chat });\n    const messageEvent = `${MESSAGE_RECIEVED}-${chat.id}`;\n    const typingEvent = `${TYPING}-${chat.id}`;\n    this.props.socket.on(typingEvent, this.updateTypingInChat(chat.id));\n    this.props.socket.on(messageEvent, this.addMessageToChat(chat.id));\n  };\n\n  addMessageToChat(chatId) {\n    return msg => {\n      let newChats = this.state.chats.map(chat => {\n        if (chat.id === chatId) {\n          chat.messages.push(msg);\n        }\n        return chat;\n      });\n      this.setState({ chats: newChats });\n    };\n  }\n\n  updateTypingInChat = chatId => {\n    return ({ isTyping, user }) => {\n      if (user !== this.props.user.name) {\n        let newChats = this.state.chats.map(chat => {\n          if (chat.id === chatId) {\n            if (isTyping && !chat.typingUsers.includes(user)) {\n              chat.typingUsers.push(user);\n            } else if (!isTyping && chat.typingUsers.includes(user)) {\n              chat.typingUsers = chat.typingUsers.filter(u => u !== user);\n            }\n          }\n          return chat;\n        });\n        this.setState({ chats: newChats });\n      }\n    };\n  };\n\n  // Sends the message to the specified chat\n  sendMessage = (chatId, message) => {\n    this.props.socket.emit(MESSAGE_SENT, { chatId, message });\n  };\n\n  // Sends typing status to the server\n  sendTyping = (chatId, isTyping) => {\n    this.props.socket.emit(TYPING, { chatId, isTyping });\n  };\n\n  setActiveChat = activeChat => {\n    this.setState({ activeChat });\n  };\n  render() {\n    const width1 = Math.max(\n      document.documentElement.clientWidth,\n      window.innerWidth || 0\n    );\n    const height = Math.max(\n      document.documentElement.clientHeight,\n      window.innerHeight || 0\n    );\n    const { user, logout } = this.props;\n    const { chats, activeChat, users } = this.state;\n    return (\n      <Container>\n        <Row>\n            <Col md=\"3\">\n            <SideBar\n              name={activeChat ? activeChat.name : 'Lapusna'}\n              logout={logout}\n              chats={chats}\n              user={user}\n              users={users}\n              activeChat={activeChat}\n              setActiveChat={this.setActiveChat}\n              onSendPrivateMessage={this.sendOpenPrivateMessage}\n            />\n            </Col>\n          <Col md=\"9\">\n          <div className=\"chat-room-container\">\n            {activeChat !== null ? (\n              <div className=\"chat-room\">\n                {/* <ChatHeading name={activeChat.name} /> */}\n                <Messages\n                  messages={activeChat.messages}\n                  user={user}\n                  typingUsers={activeChat.typingUsers}\n                />\n                <MessageInput\n                  sendMessage={message =>\n                    this.sendMessage(activeChat.id, message)\n                  }\n                  sendTyping={isTyping =>\n                    this.sendTyping(activeChat.id, isTyping)\n                  }\n                />\n              </div>\n            ) : (\n              <div className=\"chat-room choose\">\n                <h3>Choose a chat!</h3>\n              </div>\n            )}\n          </div>\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default ChatContainer;\n","import React, { Component } from 'react';\nimport io from 'socket.io-client';\nimport LoginForm from './LoginForm';\nimport ChatContainer from './chats/ChatContainer';\nimport { USER_CONNECTED, LOGOUT, VERIFY_USER } from '../events';\n\n// const socketUrl = 'http://192.168.100.3:3231/';\nconst socketUrl = '/';\nclass Layout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      socket: null,\n      user: null\n    };\n  }\n\n  componentWillMount() {\n    this.initSocket();\n  }\n\n  /**\n   * On phones, when swithing screens or locking them, the user\n   * disconnects from the server even though he is still\n   * logged in. We make use of reconnect fn to connect them back\n   */\n  reconnect = (socket) => {\n    //emit to the server so we can handle the req in socketmanager.js\n    socket.emit(VERIFY_USER, this.state.user.name, ({isUser, user}) => {\n      // fn called back by the server with the results\n      if(isUser) {\n        //checking for existing users\n        this.state({user: null})\n      } else {\n        this.setUser(user)\n      }\n    })\n  }\n\n  /**\n   * Initiate socket.io first and set it in the local state,\n   * so we can pass it around (eg as props to children components)\n   */\n  initSocket = () => {\n    const socket = io(socketUrl);\n    socket.on('connect', () => {\n      if(this.state.user) {\n        this.reconnect(socket)\n      }\n    });\n    this.setState({\n      socket\n    });\n  };\n\n  /**\n   * setUser will be called from the LoginForm comp. if there is\n   * no user already logged in (user is null in our local state).\n   * But if we have a user we dont need to call this fn as we will\n   * render the ChatContainer instead(or after the user in the state is set)\n   */\n  setUser = user => {\n    this.state.socket.emit(USER_CONNECTED, user);\n    this.setState({ user });\n  };\n\n  /**\n   * Logout it the opposite of the setUser fn. We pass it to the\n   * chatContainer comp as prop because we already have a user\n   * connected/loggedIn if this comp is rendered\n   */\n  logout = () => {\n    //logout action emited so we can disconnect the user on the server\n    this.state.socket.emit(LOGOUT);\n    this.setState({ user: null });\n  };\n\n  render() {\n    const { socket, user } = this.state;\n    return (\n      <div className=\"layout\">\n        {!user ? (\n          <LoginForm socket={this.state.socket} setUser={this.setUser} />\n        ) : (\n          <ChatContainer socket={socket} user={user} logout={this.logout} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Layout;\n","import React, { Component } from 'react';\nimport Layout from './components/Layout';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\nclass App extends Component {\n  render() {\n    return (\n        <Layout title=\"Chat App\" />\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}